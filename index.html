<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poetix | L'Art des Vers</title>
    <style>
        :root { --primary: #e94560; --bg: #0b0e14; --text: #f5f5f5; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            min-height: 100vh;
            background: radial-gradient(circle at top, #1a1a2e 0%, #0b0e14 100%);
            font-family: 'Georgia', serif; color: var(--text);
            display: flex; justify-content: center; align-items: center; padding: 20px;
        }
        .container {
            width: 100%; max-width: 700px;
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(12px); padding: 40px; border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0,0,0,0.6);
        }
        h1 { font-size: 2.2rem; text-align: center; margin-bottom: 30px; letter-spacing: 2px; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        input, select, button { padding: 14px; border-radius: 12px; border: none; font-size: 1rem; outline: none; }
        input, select { background: rgba(255,255,255,0.07); color: white; border: 1px solid rgba(255,255,255,0.1); }
        button {
            background: linear-gradient(45deg, #e94560, #ff7a90); color: white;
            font-weight: bold; cursor: pointer; transition: 0.3s; grid-column: span 2;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(233, 69, 96, 0.4); }
        #poemDisplay {
            margin-top: 30px; padding: 30px; background: rgba(0,0,0,0.25);
            border-radius: 15px; border-left: 3px solid var(--primary);
            line-height: 1.8; font-size: 1.3rem; font-style: italic;
            white-space: pre-wrap; display: none; animation: fadeIn 1s ease;
        }
        .copy-btn {
            margin-top: 15px; background: transparent; border: 1px solid var(--primary);
            color: var(--primary); font-size: 0.8rem; padding: 8px; width: 120px;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>üñãÔ∏è Poetix</h1>
    <div class="controls">
        <input type="text" id="target" class="full" placeholder="√Ä qui sont ces mots ?">
        <select id="themeSelect"></select>
        <select id="length">
            <option value="8">8 Vers (Court)</option>
            <option value="16">16 Vers (Long & Riche)</option>
        </select>
        <button onclick="generate()">Forger le po√®me</button>
    </div>
    <div id="poemDisplay"></div>
    <button id="copyBtn" class="copy-btn" style="display:none;" onclick="copy()">Copier les vers</button>
</div>

<script>
const library = {
    // Structure : Sujet | Action | Compl√©ment / M√©taphore
    themes: {
        amour: {
            subjects: ["Le c≈ìur", "Ton regard", "La passion", "L'√©treinte", "Un baiser", "Nos √¢mes", "La flamme", "Le souffle"],
            actions: ["avance en funambule", "dessine un secret", "traverse les nuits", "√©claire l'ombre", "vibre sous les heures", "cherche une √©toile", "tisse un lien", "effleure l'instant"],
            complements: ["au fond des silences.", "comme un matin fragile.", "sur un fil de cristal.", "que la ros√©e traduit.", "dans l'√©cho des lendemains.", "sous le voile du temps.", "en lettres d'argent.", "pour ne plus s'effacer."]
        },
        romance: {
            subjects: ["Le clair de lune", "Un violon", "La valse", "Le parfum des roses", "Une lettre", "Le soir", "Une m√©lodie", "Le ciel"],
            actions: ["pose un baiser", "feuillette le r√™ve", "murmure des mots anciens", "soupire doucement", "referme ses paupi√®res", "guide nos pas", "danse avec l'oubli", "chante pour nous"],
            complements: ["comme un vieux roman.", "dans la ville endormie.", "sous l'aile des heures.", "aux reflets de soie.", "qu'un ange a conduit.", "loin de la poussi√®re.", "avec une braise d'espoir.", "au creux du pr√©sent."]
        },
        printemps: {
            subjects: ["Le bourgeon", "L'hirondelle", "La ros√©e", "Le vent messager", "Le jardin", "La clart√©", "Le z√©phyr", "La s√®ve"],
            actions: ["s'√©veille en douceur", "√©crit sur l'herbe", "traduit le cristal", "√©carte l'hiver", "invente des mondes", "illumine les fleurs", "vole vers l'azur", "danse dans le jour"],
            complements: ["dans un souffle nouveau.", "sur la terre f√©conde.", "comme un chant de libert√©.", "aux couleurs retrouv√©es.", "sous le soleil naissant.", "que l'ombre redoute.", "en √©clats de joie.", "vers un ciel sans fin."]
        },
        ete: {
            subjects: ["Le soleil d'or", "Le bl√© m√ªr", "Le ciel azur", "Le z√©nith", "Le sable", "La chaleur", "L'√©clat br√ªlant", "L'√©t√©"],
            actions: ["embrase l'horizon", "fige le temps", "chante sa gloire", "coule sur les toits", "fait vibrer l'air", "ignore la nuit", "rayonne sans fin", "caresse les champs"],
            complements: ["en une braise t√™tue.", "dans l'immensit√© bleue.", "sous un d√¥me de feu.", "pour l'√©ternit√©.", "comme un secret solaire.", "sans un seul regret.", "au milieu du silence.", "dans l'or du couchant."]
        },
        automne: {
            subjects: ["La feuille morte", "Le vent", "La brume", "La for√™t rousse", "Le cr√©puscule", "L'ambre", "La pluie", "L'heure"],
            actions: ["tombe en tourbillons", "pleure sur les bancs", "efface les chemins", "raconte l'hier", "se teinte d'oubli", "glisse entre les branches", "frissonne au soir", "√©teint les feux"],
            complements: ["comme un vieux souvenir.", "dans la nostalgie pure.", "sous les pas des amants.", "que le gris envahit.", "vers le repos du monde.", "en murmures d'automne.", "sous un ciel fatigu√©.", "pour clore l'histoire."]
        },
        hiver: {
            subjects: ["Le givre", "La neige", "Le froid", "La glace", "Le feu de bois", "Le silence", "Le ciel blanc", "Le cristal"],
            actions: ["mord la poussi√®re", "fige la rivi√®re", "sculpte le vide", "brille sous la lune", "veille sur l'ombre", "endort la terre", "trace des chemins", "enferme le temps"],
            complements: ["dans un √©crin de sel.", "sous un voile de deuil.", "comme une √©toile froide.", "au c≈ìur des maisons.", "loin du tumulte.", "dans la puret√© vive.", "pour une longue tr√™ve.", "sans aucun bruit."]
        },
        // Th√®mes d'origine conserv√©s avec cette structure enrichie...
        nature: {
            subjects: ["La montagne", "La rivi√®re", "Le ch√™ne", "L'aurore", "Le val", "L'oiseau", "La terre", "L'horizon"],
            actions: ["garde le secret", "traverse les √¢ges", "d√©fie l'orage", "salue le jour", "coule vers la mer", "prend son envol", "respire au matin", "regarde au loin"],
            complements: ["dans la force brute.", "sous le regard des dieux.", "comme un pilier du ciel.", "en un souffle de vie.", "vers l'infini vaste.", "que rien n'arr√™te.", "au rythme du monde.", "pour l'√©ternit√©."]
        },
        nostalgie: {
            subjects: ["Le pass√©", "Le vieux banc", "Le souvenir", "L'enfance", "La photo", "L'hier", "La trace", "Le temps"],
            actions: ["revient en √©cho", "s'efface lentement", "frappe √† la porte", "brille au fond", "rappelle les noms", "se perd en douceur", "cherche une √©paule", "murmure nos joies"],
            complements: ["dans l'ombre d'un r√™ve.", "que le vent emporte.", "comme un vieux roman.", "au fond du c≈ìur.", "sous la poussi√®re d'or.", "dans le silence bleu.", "sans faire de bruit.", "pour ne pas mourir."]
        },
        reve: {
            subjects: ["Le songe", "Le nuage", "Le miroir", "L'imaginaire", "Le vol", "L'onirisme", "L'ombre", "L'ailleurs"],
            actions: ["invente des cieux", "trompe le r√©el", "s'√©vade du corps", "joue avec l'√¢me", "cr√©e des images", "dessine demain", "flotte en secret", "ouvre les portes"],
            complements: ["loin des regards.", "dans un monde √† part.", "comme un voile l√©ger.", "au-del√† des fronti√®res.", "que l'esprit conduit.", "pour un instant pur.", "sous l'≈ìil de la nuit.", "sans fin ni limite."]
        }
    }
};

const select = document.getElementById('themeSelect');
Object.keys(library.themes).forEach(t => {
    let opt = document.createElement('option');
    opt.value = t;
    opt.innerHTML = t.charAt(0).toUpperCase() + t.slice(1);
    select.appendChild(opt);
});

function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

function generate() {
    const target = document.getElementById('target').value;
    const themeKey = document.getElementById('themeSelect').value;
    const length = parseInt(document.getElementById('length').value);
    const theme = library.themes[themeKey];

    // On pr√©pare des sets de donn√©es m√©lang√©s pour √©viter la r√©p√©tition imm√©diate
    let s = shuffle([...theme.subjects]);
    let a = shuffle([...theme.actions]);
    let c = shuffle([...theme.complements]);

    let poem = "";
    if(target) poem += `<span style="color:var(--primary); font-size:1.1rem">√Ä ${target},</span>\n\n`;

    for(let i = 0; i < length; i++) {
        // S√©lection circulaire si on d√©passe le nombre de phrases uniques (mais avec shuffle, l'ordre change √† chaque clic)
        let sub = s[i % s.length];
        let act = a[i % a.length];
        let comp = c[i % c.length];
        
        poem += `${sub} ${act} ${comp}\n`;
        
        // Saut de strophe tous les 4 vers
        if((i+1) % 4 === 0 && (i+1) !== length) poem += "\n";
    }

    // Ajout de la conclusion signature
    poem += `\n<span style="opacity:0.6; font-size:0.9rem">¬´ Le monde est vaste, et tu es venu. ¬ª ‚ú®</span>`;

    const display = document.getElementById('poemDisplay');
    display.innerHTML = poem;
    display.style.display = 'block';
    document.getElementById('copyBtn').style.display = 'block';
}

function copy() {
    const text = document.getElementById('poemDisplay').innerText;
    navigator.clipboard.writeText(text);
    alert("Po√®me copi√© !");
}
</script>
</body>
</html>
