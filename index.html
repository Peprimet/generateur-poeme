<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poetix | L'Anthologie Infinie</title>
    <style>
        :root { --primary: #e94560; --bg: #0b0e14; --text: #f5f5f5; --glass: rgba(255, 255, 255, 0.07); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            min-height: 100vh;
            background: radial-gradient(circle at top, #1a1a2e 0%, #0b0e14 100%);
            font-family: 'Georgia', serif; color: var(--text);
            display: flex; justify-content: center; align-items: center; padding: 20px;
        }

        .container {
            width: 100%; max-width: 750px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px); padding: 45px; border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 30px 60px rgba(0,0,0,0.7);
        }

        h1 { font-size: 2.5rem; text-align: center; margin-bottom: 35px; letter-spacing: 3px; font-weight: 300; }
        
        /* Correction du bug visuel des menus */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        
        input, select {
            padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
            background: var(--glass); color: white; font-size: 1rem; outline: none;
            transition: 0.3s; width: 100%;
        }

        /* Style sp√©cifique pour les options pour √©viter le blanc sur blanc */
        select option { background: #1a1a2e; color: white; }

        input:focus, select:focus { border-color: var(--primary); background: rgba(255,255,255,0.12); }

        button {
            padding: 18px; border-radius: 12px; border: none; font-size: 1.1rem;
            background: linear-gradient(45deg, #e94560, #ff7a90); color: white;
            font-weight: bold; cursor: pointer; transition: 0.4s; grid-column: span 2;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
        }

        button:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(233, 69, 96, 0.5); }

        #poemDisplay {
            margin-top: 40px; padding: 35px; background: rgba(0,0,0,0.3);
            border-radius: 20px; border-left: 4px solid var(--primary);
            line-height: 2; font-size: 1.35rem; font-style: italic;
            white-space: pre-wrap; display: none; animation: slideIn 1.2s ease;
        }

        .footer-quote {
            margin-top: 25px; text-align: center; font-size: 0.9rem; opacity: 0.5; font-style: normal;
        }

        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>üñãÔ∏è Poetix</h1>
    
    <div class="controls">
        <input type="text" id="target" style="grid-column: span 2;" placeholder="D√©di√© √†... (ex: Julie, l'horizon)">
        
        <select id="themeSelect"></select>
        
        <select id="length">
            <option value="8">Huitain (8 vers)</option>
            <option value="16">Anthologie (16 vers)</option>
        </select>
        
        <button onclick="generate()">Invoquer la Muse</button>
    </div>

    <div id="poemDisplay"></div>
    <div class="footer-quote" id="signature" style="display:none;">¬´ Le monde est vaste, et tu es venu. ¬ª ‚ú®</div>
</div>

<script>
const library = {
    // Structure par blocs pour une coh√©rence maximale (Sujet + Action + M√©taphore)
    themes: {
        amour: {
            s: ["Le c≈ìur", "Ton regard", "La passion", "L'√©treinte", "Ton souffle", "Nos √¢mes", "Un baiser", "La flamme"],
            a: ["avance en funambule", "dessine un secret", "traverse les nuits", "√©claire l'ombre", "vibre sous les heures", "cherche une √©toile", "tisse un lien", "effleure l'instant"],
            m: ["au fond des silences.", "comme un matin fragile.", "sur un fil de cristal.", "que la ros√©e traduit.", "dans l'√©cho des lendemains.", "sous le voile du temps.", "en lettres d'argent.", "pour ne plus s'effacer."]
        },
        romance: {
            s: ["Le clair de lune", "Un violon", "La valse", "Le parfum des roses", "Une lettre", "Le soir", "Une m√©lodie", "Le ciel"],
            a: ["pose un baiser", "feuillette le r√™ve", "murmure des mots anciens", "soupire doucement", "referme ses paupi√®res", "guide nos pas", "danse avec l'oubli", "chante pour nous"],
            m: ["comme un vieux roman.", "dans la ville endormie.", "sous l'aile des heures.", "aux reflets de soie.", "qu'un ange a conduit.", "loin de la poussi√®re.", "avec une braise d'espoir.", "au creux du pr√©sent."]
        },
        printemps: {
            s: ["Le bourgeon", "L'hirondelle", "La ros√©e", "Le vent messager", "Le jardin", "La clart√©", "Le z√©phyr", "La s√®ve"],
            a: ["s'√©veille en douceur", "√©crit sur l'herbe", "traduit le cristal", "√©carte l'hiver", "invente des mondes", "illumine les fleurs", "vole vers l'azur", "danse dans le jour"],
            m: ["dans un souffle nouveau.", "sur la terre f√©conde.", "comme un chant de libert√©.", "aux couleurs retrouv√©es.", "sous le soleil naissant.", "que l'ombre redoute.", "en √©clats de joie.", "vers un ciel sans fin."]
        },
        ete: {
            s: ["Le soleil d'or", "Le bl√© m√ªr", "Le ciel azur", "Le z√©nith", "Le sable", "La chaleur", "L'√©clat br√ªlant", "L'√©t√©"],
            a: ["embrase l'horizon", "fige le temps", "chante sa gloire", "coule sur les toits", "fait vibrer l'air", "ignore la nuit", "rayonne sans fin", "caresse les champs"],
            m: ["en une braise t√™tue.", "dans l'immensit√© bleue.", "sous un d√¥me de feu.", "pour l'√©ternit√©.", "comme un secret solaire.", "sans un seul regret.", "au milieu du silence.", "dans l'or du couchant."]
        },
        automne: {
            s: ["La feuille morte", "Le vent", "La brume", "La for√™t rousse", "Le cr√©puscule", "L'ambre", "La pluie", "L'heure"],
            a: ["tombe en tourbillons", "pleure sur les bancs", "efface les chemins", "raconte l'hier", "se teinte d'oubli", "glisse entre les branches", "frissonne au soir", "√©teint les feux"],
            m: ["comme un vieux souvenir.", "dans la nostalgie pure.", "sous les pas des amants.", "que le gris envahit.", "vers le repos du monde.", "en murmures d'automne.", "sous un ciel fatigu√©.", "pour clore l'histoire."]
        },
        hiver: {
            s: ["Le givre", "La neige", "Le froid", "La glace", "Le feu de bois", "Le silence", "Le ciel blanc", "Le cristal"],
            a: ["mord la poussi√®re", "fige la rivi√®re", "sculpte le vide", "brille sous la lune", "veille sur l'ombre", "endort la terre", "trace des chemins", "enferme le temps"],
            m: ["dans un √©crin de sel.", "sous un voile de deuil.", "comme une √©toile froide.", "au c≈ìur des maisons.", "loin du tumulte.", "dans la puret√© vive.", "pour une longue tr√™ve.", "sans aucun bruit."]
        },
        nostalgie: {
            s: ["Le pass√©", "Le vieux banc", "Le souvenir", "L'enfance", "La photo", "L'hier", "La trace", "Le temps"],
            a: ["revient en √©cho", "s'efface lentement", "frappe √† la porte", "brille au fond", "rappelle les noms", "se perd en douceur", "cherche une √©paule", "murmure nos joies"],
            m: ["dans l'ombre d'un r√™ve.", "que le vent emporte.", "comme un vieux roman.", "au fond du c≈ìur.", "sous la poussi√®re d'or.", "dans le silence bleu.", "sans faire de bruit.", "pour ne pas mourir."]
        }
    }
};

const select = document.getElementById('themeSelect');
Object.keys(library.themes).forEach(t => {
    let opt = document.createElement('option');
    opt.value = t;
    opt.innerHTML = t.charAt(0).toUpperCase() + t.slice(1);
    select.appendChild(opt);
});

function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

function generate() {
    const target = document.getElementById('target').value;
    const themeKey = document.getElementById('themeSelect').value;
    const length = parseInt(document.getElementById('length').value);
    const theme = library.themes[themeKey];

    // On m√©lange les √©l√©ments pour la vari√©t√©
    let subjects = shuffle([...theme.s]);
    let actions = shuffle([...theme.a]);
    let metas = shuffle([...theme.m]);

    let poem = "";
    if(target) poem += `<span style="color:var(--primary); font-style: normal; font-weight: bold; display: block; margin-bottom: 20px;">D√©di√© √† ${target},</span>`;

    for(let i = 0; i < length; i++) {
        // S√©lection cyclique intelligente pour √©viter les erreurs si length > 8
        let s = subjects[i % subjects.length];
        let a = actions[i % actions.length];
        let m = metas[i % metas.length];
        
        poem += `${s} ${a} ${m}\n`;
        
        // Saut de strophe tous les 4 vers
        if((i+1) % 4 === 0 && (i+1) !== length) poem += "\n";
    }

    const display = document.getElementById('poemDisplay');
    display.innerHTML = poem.trim();
    display.style.display = 'block';
    document.getElementById('signature').style.display = 'block';
    
    // Scroll automatique vers le po√®me
    display.scrollIntoView({ behavior: 'smooth' });
}
</script>

</body>
</html>
